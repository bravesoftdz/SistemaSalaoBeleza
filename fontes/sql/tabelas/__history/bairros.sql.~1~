/*
Descrição:
  Tabela utilizada para gravar os dados dos bairros

Histórico de alterações:
  v1.00  - 24/05/2012 
    - Criação da tabela.k
  v1.00a - 27/05/2012
    - Incluído a chave primária id_bairro_bairros_pk, o índice ds_bairro_bairros_uq e a chave 
    estrangeira cd_usuario_bairros_fkk.k 	
*/  	
	
create table BAIRROS  (
   ID_BAIRRO		integer not null 
  
  ,DS_BAIRRO		varchar(  40) not null
  
  ,DT_CADASTRO	 timestamp not null
  ,DT_MANUTENCAO timestamp not null
  ,DT_EXCLUSAO	 timestamp default null
  
  ,CD_USUARIO		integer not null  
  
  ,constraint ID_BAIRRO_BAIRROS_PK primary key (ID_BAIRRO)
  ,constraint DS_BAIRRO_BAIRROS_UQ unique      (DS_BAIRRO)
  
  ,constraint CD_USUARIO_BAIRROS_FK foreign key (CD_USUARIO) references USUARIOS(ID_USUARIO)
    on delete no action on update cascade  
);



create generator ID_BAIRRO_BAIRROS_GN ;
set generator ID_BAIRRO_BAIRROS_GN to 0;



create or alter trigger ID_BAIRRO_BAIRROS_TG for BAIRROS
  active before insert 
  position 0
as
begin

  new.ID_BAIRRO = gen_id( ID_BAIRRO_BAIRROS_GN ,1 ); 

end;